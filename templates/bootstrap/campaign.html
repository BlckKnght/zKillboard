{% extends 'base.html' %}

{% set pageTitle = 'Campagin - {{ data.campaign.name }}' %}
{% block title %}{% include 'components/title.html' %}{% endblock %}

{% block content %}
{% if error %}
	<div class="row"><div class="alert alert-danger">{{ error }}</div></div>
{% endif %}

<h2><small>Campaign: </small>{{ data.campaign.name }} <small>Start: {{ data.campaign.start_dttm }} {% if data.campaign.end_dttm %} End: {{ data.campaign.end_dttm }}{% endif %}</small></h2>

<div class="row col-md-6">
<table class="table table-bordered">
	<tr>
		<th class="text-right" colspan="2">{{ data.teamA.name }}</th>
		<th class="text-center">vs</th>
		<th class="text-left" colspan="2">{{ data.teamB.name }}</th>
	</tr>
	<tr>
		{% set left = data.teamA.stats.destroyed < data.teamB.stats.destroyed ? 'green' : 'red' %}
		{% set right = data.teamA.stats.destroyed > data.teamB.stats.destroyed ? 'green' : 'red' %}
		{% set pctg = data.teamA.stats.destroyed == 0 or data.teamB.stats.destroyed == 0 ? 0 : (data.teamA.stats.destroyed / (data.teamA.stats.destroyed + data.teamB.stats.destroyed)) * 100 %}
		<td class="text-right {{ left }}">{{ (100 - pctg) | number_format(1) }}%</td>
		<td class="text-right {{ left }}">{{ data.teamA.stats.destroyed | number_format()}}</td>
		<td class="text-center">Losses</td>
		<td class="text-left {{ right }}">{{ data.teamB.stats.destroyed | number_format()}} ({{ pctg | number_format(1) }}%)</td>
		<td class="text-left {{ right }}">{{ pctg | number_format(1) }}%</td>
	</tr>
	<tr>
		{% set left = data.teamA.stats.iskDestroyed < data.teamB.stats.iskDestroyed ? 'green' : 'red' %}
		{% set right = data.teamA.stats.iskDestroyed > data.teamB.stats.iskDestroyed ? 'green' : 'red' %}
		{% set pctg = data.teamA.stats.iskDestroyed == 0 or data.teamB.stats.iskDestroyed == 0 ? 0 : (data.teamA.stats.iskDestroyed / (data.teamA.stats.iskDestroyed + data.teamB.stats.iskDestroyed)) * 100 %}
		<td class="text-right {{ left }}">{{ (100 - pctg) | number_format(1) }}%</td>
		<td class="text-right {{ left }}">{{ data.teamA.stats.iskDestroyed | number_format(2, '.', ',') }}</td>
		<td class="text-center">ISK</td>
		<td class="text-left {{ right }}">{{ data.teamB.stats.iskDestroyed | number_format(2, '.', ',') }}</td>
		<td class="text-left {{ right }}">{{ pctg | number_format(1) }}%</td>
	</tr>
	<tr>
		{% set left = data.teamA.stats.pointsDestroyed < data.teamB.stats.pointsDestroyed ? 'green' : 'red' %}
		{% set right = data.teamA.stats.pointsDestroyed > data.teamB.stats.pointsDestroyed ? 'green' : 'red' %}
		{% set pctg = data.teamA.stats.pointsDestroyed == 0 or data.teamB.stats.pointsDestroyed == 0 ? 0 : (data.teamA.stats.pointsDestroyed / (data.teamA.stats.pointsDestroyed + data.teamB.stats.pointsDestroyed)) * 100 %}
		<td class="text-right {{ left }}">{{ (100 - pctg) | number_format(1) }}%</td>
		<td class="text-right {{ left }}">{{ data.teamA.stats.pointsDestroyed | number_format() }}</td>
		<td class="text-center">Points</td>
		<td class="text-left {{ right }}">{{ data.teamB.stats.pointsDestroyed | number_format() }}</td>
		<td class="text-left {{ right }}">{{ pctg | number_format(1) }}%</td>
	</tr>
	<tr>
		<td class="text-right" colspan="2">{% set entities = data.entitiesA %}{% include 'components/entities.html' %}</td>
		<td class="text-center">Members</td>
		<td class="text-left" colspan="2">{% set entities = data.entitiesB %}{% include 'components/entities.html' %}</td>
	</tr>
</table>
</div>

<div class="clearfix"></div>

{% set summaryTable = data.stats %}
{% include 'components/campaign_summary.html' %}

<div class="clearfix"></div>

<div class="row">
{% for topSet in data.top %}
	{% include 'components/top_killer_list.html' %}
{% endfor %}
</div>
<div class="clearfix"></div>

{% set killListTitle = 'Recent Activity' %}
{% set killList = data.kills %}
{% include 'components/kill_list.html' %}

{% endblock %}
